!function(e,n,t,o){"use strict";var a=t.module("angular-debug-bar",[]),c=1e3;a.factory("DebugBarFactory",["$interval",function(a){var r={},u=e.performance||e.msPerformance||e.webkitPerformance||e.mozPerformance,i=function(){},l=function(e,n){var o=function(){};return o.prototype=new i,t.extend(o.prototype,n),r[e]=new o,r[e]},s={valueName:o,unit:o,label:o,icon:o},m=function(e){a(e,c)},p={getPlugins:function(){return r}};return t.extend(i.prototype,{extendScope:function(){throw new Error("Unimplemented method :extendScope")},getParams:function(){throw new Error("Unimplemented method :getParams")}}),l("watchCount",{extendScope:function(e){e.watchCount=0,m(function(){var o=t.element(n.getElementsByTagName("html")),a=[],c=function(e){e.data().hasOwnProperty("$scope")&&t.forEach(e.data().$scope.$$watchers,function(e){a.push(e)}),t.forEach(e.children(),function(e){c(t.element(e))})};0===a.length&&c(o),e.watchCount=a.length})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"watchCount",label:"Watchers",icon:"adb-icon-eye"}),e}}),l("listenerCount",{extendScope:function(e){e.listenerCount=0,m(function(){var o=t.element(n.getElementsByTagName("html")),a=[],c=function(e){e.data().hasOwnProperty("$scope")&&t.forEach(e.data().$scope.$$listeners,function(e){a.push(e)}),t.forEach(e.children(),function(e){c(t.element(e))})};0===a.length&&c(o),e.listenerCount=a.length})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"listenerCount",label:"Listeners",icon:"adb-icon-headphones"}),e}}),l("DOMObjectCount",{extendScope:function(e){e.DOMObjectCount=0,m(function(){e.DOMObjectCount=n.all.length})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"DOMObjectCount",label:"DOM objects",icon:"adb-icon-home"}),e}}),l("loadTime",{extendScope:function(e){e.loadTime=0,m(function(){e.loadTime=u.timing.loadEventStart-u.timing.navigationStart})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"loadTime",label:"Load time",unit:"ms"}),e}}),l("latency",{extendScope:function(e){e.latency=0,m(function(){e.latency=u.timing.responseStart-u.timing.connectStart})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"latency",label:"Latency",unit:"ms"}),e}}),l("cssCount",{extendScope:function(e){e.cssCount=0,m(function(){e.cssCount=n.querySelectorAll('link[rel="stylesheet"]').length})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"cssCount",label:"CSS"}),e}}),l("jsCount",{extendScope:function(e){e.jsCount=0,m(function(){e.jsCount=n.querySelectorAll("script").length})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"jsCount",label:"JS"}),e}}),l("imgCount",{extendScope:function(e){e.imgCount=0,m(function(){e.imgCount=n.querySelectorAll("img").length})},getParams:function(){var e=t.copy(s);return t.extend(e,{valueName:"imgCount",label:"Images"}),e}}),p}]),a.directive("angularDebugBarPlugins",["$compile",function(e){var n=function(e){var n='<li><div class="value-wrapper">';return e.icon&&(n+='<i class="'+e.icon+'"></i>'),n+='<span class="value" ng-bind="'+e.valueName+'"></span>',e.unit&&(n+='<span class="unit">'+e.unit+"</span>"),n+="</div>",e.label&&(n+='<h3 class="label">'+e.label+"</h3>"),n+"</li>"};return{restrict:"E",replace:!0,scope:!1,template:"<ul></ul>",link:function(o,a){t.forEach(o.plugins,function(t){var c=o.$new();t.scope=c,t.extendScope(c),a.append(e(n(t.getParams()))(c))})}}}]),a.directive("angularDebugBar",["$compile","DebugBarFactory",function(n,t){return{restrict:"E",replace:!0,scope:!0,controller:["$scope",function(n){var t=e.localStorage,o="adb.open",a=function(){return!!t};n.plugins={},n.show=a()?JSON.parse(t.getItem(o)):!1,n.showHide=function(e){e.preventDefault(),n.show=!n.show,a()&&t.setItem(o,n.show)}}],compile:function(e){var o='<div id="angular-debug-bar" ng-class="{ \'show\': show }"><button class="adb-icon-cog" ng-click="showHide($event)"></button><angular-debug-bar-plugins></angular-debug-bar-plugins></div>';return function(a){a.plugins=t.getPlugins(),e.replaceWith(n(o)(a))}}}}])}(window,window.document,window.angular);